{"name":"Basak - Create PortShaker","platform":"node","hash":"jsin5fPeiwpL3GGDVwePFRBQmNAmIm2ClCc69CgkCYw=","blocks":[{"action":"system/SevOne/REST v3/Metadata/Metadata Devices (POST)","name":"Find_Device","inputs":[{"name":"authKey","value":"$NMSCredentials"},{"name":"body","value":"{\n    \"name\": {\n        \"value\": $Device_Name\n    }\n}"}]}, {"action":"system/SevOne/REST v3/Metadata/Metadata Plugins (POST)","name":"Find_Plugin","inputs":[{"name":"authKey","value":"$NMSCredentials"},{"name":"body","value":"{\n    \"names\": [{\n        \"fuzzy\": true,\n        \"value\": \"PortShaker\"\n    }]\n}"}]}, {"action":"system/SevOne/REST v3/Metadata/Metadata Object Types (POST)","name":"Find_Object_Type","inputs":[{"name":"authKey","value":"$NMSCredentials"},{"name":"body","value":"{\n    \"pluginId\": $Find_Plugin.result.plugins[0].id\n}"}]}, {"action":"if","name":"Add_or_Remove","then":[{"action":"system/SevOne/REST v2/Objects/Create Object","name":"SevOne_Create_PortShaker","inputs":[{"name":"authKey","value":"$NMSCredentials"},{"name":"deviceId","value":"$Find_Device.result.devices[0].id"},{"name":"object","value":"{\n    \"enabled\": \"ENABLED\",\n    \"description\": $Service_Name,\n    \"pluginId\": $Find_Plugin.result.plugins[0].id,\n    \"pluginObjectTypeId\": $Find_Object_Type.result.objectTypes[0].id,\n    \"name\": $Service_Name\n}"}]},{"action":"assign","name":"Result","variable":"$result","value":"$SevOne_Create_Portshaker.result"},{"action":"system/SevOne/REST v2/Discovery/Run Discover Device","name":"SevOne_Discover","inputs":[{"name":"authKey","value":"$NMSCredentials"},{"name":"id","value":"$Find_Device.result.devices[0].id"},{"name":"localOnly","value":"false"}]}],"else":[{"action":"system/SevOne/REST v3/Metadata/Metadata Objects (POST)","name":"Find_Object","inputs":[{"name":"authKey","value":"$NMSCredentials"},{"name":"body","value":"{\n    \"objectTypeIds\": $Find_Object_Type.result.objectTypes[0].id,\n    \"name\": {\n        \"value\": $Service_Name\n    },\n    \"deviceIds\": [ $Find_Device.result.devices[0].id ]\n}"}]},{"action":"system/SevOne/REST v2/Objects/Delete Object by Id","name":"SevOne_Delete_Object","inputs":[{"name":"authKey","value":"$NMSCredentials"},{"name":"deviceId","value":"$Find_Device.result.devices[0].id"},{"name":"id","value":"$Find_Object.result.objects[0].id"}]},{"action":"assign","name":"Result2","variable":"$result","value":"$SevOne_Delete_object.result.body"}],"condition":"$Action == \"add\""}],"variables":[{"name":"result","required":false,"isInput":false,"isOutput":true,"level":"INTERMEDIATE","type":{"type":"any"},"value":"\"\""},{"name":"NMSCredentials","required":false,"isInput":true,"isOutput":false,"level":"INTERMEDIATE","type":{"type":"string"},"value":"\"admin/SevOne\""},{"name":"Device_Name","required":true,"isInput":true,"isOutput":false,"level":"INTERMEDIATE","type":{"type":"string"},"value":"\"NMS\""},{"name":"Port","required":true,"isInput":true,"isOutput":false,"level":"INTERMEDIATE","type":{"type":"string"},"value":"\"22\""},{"name":"Service_Name","required":true,"isInput":true,"isOutput":false,"level":"INTERMEDIATE","type":{"type":"string"},"value":"\"SSH\""},{"name":"action","required":true,"isInput":true,"isOutput":false,"level":"INTERMEDIATE","type":{"type":"string"},"value":"\"delete\""}],"meta":{"version":5,"layout":"flow","workerGroup":"default","created":1710252740124,"lastUpdated":1710253871551,"numberOfBlocks":7}}