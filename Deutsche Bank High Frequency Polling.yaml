name: Deutsche Bank High Frequency Polling
platform: node
blocks:
  - action: system/SevOne/REST v3/Polling/Polling Remove Hfp Object
    name: SevOne_Delete_HFP
    inputs:
      - name: authKey
        value: $NMSCredentials
      - name: deviceId
        value: $deviceid
      - name: objectId
        value: $objectid
  - action: assign
    name: Assign
    variable: $result
    value: $SevOne_Delete_HFP.result
  - action: if
    name: If_1
    then:
      - action: system/SevOne/REST v3/Polling/Polling Add Hfp Object
        name: SevOne_Add_HFP
        inputs:
          - name: authKey
            value: $NMSCredentials
          - name: body
            value: |-
              {
                  "pluginString": $plugin,
                  "deviceId": $deviceid,
                  "frequency": $frequency,
                  "objectId": $objectid
              }
      - action: assign
        name: Assign_2
        variable: $result
        value: $SevOne_Add_HFP.result
    else: []
    condition: $action == "Set"
variables:
  - name: result
    required: false
    isInput: false
    isOutput: true
    level: INTERMEDIATE
    type:
      type: any
    value: '"Great"'
  - name: deviceid
    required: true
    isInput: true
    isOutput: false
    level: INTERMEDIATE
    type:
      type: number
    value: "1"
  - name: objectid
    required: true
    isInput: true
    isOutput: false
    level: INTERMEDIATE
    type:
      type: number
    value: "1"
  - name: frequency
    required: true
    isInput: true
    isOutput: false
    level: INTERMEDIATE
    type:
      type: number
    value: "20"
  - name: action
    required: true
    isInput: true
    isOutput: false
    level: INTERMEDIATE
    type:
      type: string
    value: '"Set"'
  - name: plugin
    required: true
    isInput: true
    isOutput: false
    level: INTERMEDIATE
    type:
      type: string
    value: '"ICMP"'
  - name: NMSCredentials
    required: false
    isInput: true
    isOutput: false
    level: INTERMEDIATE
    type:
      type: string
    value: '"admin/SevOne"'
meta:
  version: 5
  layout: flow
  workerGroup: default
